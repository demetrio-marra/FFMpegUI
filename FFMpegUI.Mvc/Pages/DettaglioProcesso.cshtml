@page
@model FFMpegUI.Mvc.Pages.DettaglioProcessoModel

<h1>@ViewData["Title"]</h1>

<div class="row mb-3">
    <div class="col-md-6">
        <label asp-for="OverallConversionQuality" class="form-label">Overall Conversion Quality</label>
        <p class="form-control-static">@Model.OverallConversionQuality</p>
    </div>
    <div class="col-md-6">
        <label asp-for="RescaleHorizontalWidth" class="form-label">Rescale Horizontal Width</label>
        <p class="form-control-static">@Model.RescaleHorizontalWidth</p>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        <label asp-for="AudioCodec" class="form-label">Audio Codec</label>
        <p class="form-control-static">@Model.AudioCodec</p>
    </div>
    <div class="col-md-6">
        <label asp-for="VideoCodec" class="form-label">Video Codec</label>
        <p class="form-control-static">@Model.VideoCodec</p>
    </div>
</div>


<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">Original</th>
            <th scope="col">Converted</th>
            <th scope="col">Start</th>
            <th scope="col">End</th>
            <th scope="col">State</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.ProcessItems)
        {
            var message = "ok";
            if (!(item.Successfull ?? false))
            {
                message = item.ErrorMessage;
            }

            <tr>
                <td><a asp-page-handler="Download" asp-route-id="@item.SourceFileId">@item.SourceFileName</a></td>
                <td><a asp-page-handler="Download" asp-route-id="@item.ConvertedFileId">@item.ConvertedFileName</a></td>
                <td>@(item.StartDate.HasValue ? item.StartDate.Value.ToString("g") : "N/A")</td>
                <td>@(item.EndDate.HasValue ? item.EndDate.Value.ToString("g") : "N/A")</td>
                <td>@message</td>
            </tr>
        }
    </tbody>
</table>
